/*
** EPITECH PROJECT, 2024
** my_rpg
** File description:
** weapons
*/

#ifndef WEAPONS_H_
    #define WEAPONS_H_

///////////////////////////////////////////////////////////////////////////////
// Headers
///////////////////////////////////////////////////////////////////////////////
    #include "rpg.h"

///////////////////////////////////////////////////////////////////////////////
/// \brief
///
///////////////////////////////////////////////////////////////////////////////
typedef enum weapon_type_e {
    weaponLaser,
    weaponBullet,
    weaponMelee,
    weaponExplosive,
    WEAPON_TYPE_COUNT
} weapon_type_t;

///////////////////////////////////////////////////////////////////////////////
/// \brief
///
/// \param sender
/// \param origin
/// \param destination
///
///////////////////////////////////////////////////////////////////////////////
typedef struct bullet_s {
    uint_t sender;
    sfSprite *sprite;
    v2f_t origin;
    v2f_t destination;
    v2f_t position;
    uint_t destroyed;
    uint_t rect_sprite;
    uint_t num_sheet;
    uint_t size_max_x;
    uint_t begin;
    sfCircleShape *area;
} bullet_t;

///////////////////////////////////////////////////////////////////////////////
/// \brief
///
/// \param type
/// \param ammos
/// \param damage
/// \param firerate
///
///////////////////////////////////////////////////////////////////////////////
typedef struct weapon_s {
    weapon_type_t type;
    uint_t ammos;
    uint_t damage;
    float firerate;
} weapon_t;

///////////////////////////////////////////////////////////////////////////////
/// \brief
///
/// \param array
/// \param count
///
///////////////////////////////////////////////////////////////////////////////
extern struct bullet_list_s {
    bullet_t **array;
    uint_t count;
} Bullet_List;

///////////////////////////////////////////////////////////////////////////////
/// \brief create new bullets when players and enemies engage in shooting.
///
/// \param sender the bullet id (who is the shooter?)
/// \param size_rect the size of the first sprite
/// \param sprite_shett numbre of sprite_sheet
/// \param size_max the maximum size of the sprite_sheet
///////////////////////////////////////////////////////////////////////////////
bullet_t *bullet_creation(uint_t sender, uint_t size_rect, uint_t spritesheet,
    uint_t size_max);
///////////////////////////////////////////////////////////////////////////////
/// \brief draw bullets from an array
///
///////////////////////////////////////////////////////////////////////////////
void draw_bullets(void);
///////////////////////////////////////////////////////////////////////////////
/// \brief destroy bullets when they hit their targets or get out of the
///
///        circle.
///
/// \param bullet the sprite_sheet of the bullet.
///////////////////////////////////////////////////////////////////////////////
bool_t destroy_bullet(bullet_t *bullet);

#endif /* !WEAPONS_H_ */
